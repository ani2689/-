### JWT

JWT는 토큰 인증 방식중 하나다. 

### JWT의 구조

JWT는 아래와 같은 구조로 이루어진다.

```
aaaaa.bbbbbb.cccccc
```

마침표(.)로 구분되며 차례대로 헤더, 내용, 서명으로 이루어져있다.

### 헤더

토큰의 타입과 해실 알고리즘을 지정하는 정보를 담는다. 

```JWT
{
    "typ": "JWT",
    "alg": "HS256"   
}

```

위 내용은 JWT 토큰과 HS256해싱 알고리즘을 사용한다는 내용이다.

헤더의 구성을 표로 정리하면 다음과 같다.

| 이름 | 설명 |
| --- | --- | 
| tye | 토큰의 타입을 지정합니다. |
| alg | 해싱 알고리즘을 지정합니다. |


### 내용

토큰과 관련된 정보를 담는다. 내용의 한 덩어리를 클레임이라는 단위로 묶으며 클레임은 키 값의 한 쌍으로 이루어져 있다. 클레임은 등록된 클레임, 공개 클레임, 비공개 클레임으로 나눌 수 있다.

등록된 클레임은 토큰에 대한 정보를 담는다.

| 이름 | 설명 |
| --- | --- | 
| iss | 토큰 발급자(issuer) |
| sub | 토큰 제목(subject) | 
| aud | 토큰 대상자(audience) |
| exp | 토큰의 만료 시간(expiraton). 시간은 NumberticDate 형식으로 하며 항상 현재시간 이후로 설정한다. | 
| nbf | 토큰의 활성 날짜와 비슷한 개념으로 ndf는 not Before을 의미한다. 시간은 NumberticDate 형식으로 하며 이 날자가 지정되기 전까지는 토큰이 처리되지 않습니다. |
| iat | 토큰이 발급된 시간으로 iat은 issued at을 의미한다. | 
| jti | JWT의 고유 식별자로서 주로 일회용 코드로 이용된다. |

공개 클레임은 공개되어도 상관없는 클레임을 의미한다. 충돌을 방지할 수 있는 이름을 가져야하며, 보통 클레임 이름을 URI로 짓는다.

비공개 클레임은 공개되면 안되는 클레임을 의미한다. 주로 클라이언트와 서버의 통신에 사용된다.

아래는 JWT의 예이다.

```JWT

{
    "iss": "s22044@gsm.hs.kr",
    "iat": 1622370878,
    "exp": 1622372678,
    "https://ani.com/jwt_claims/is_admin": true,
    "email": "s22044@gsm.hs.kr",
    "hello": "안녕하세요!"
}

```

`iss`, `iat`, `exp`는 JWT 자체에서 등록된 클레임이고, URI로 네이밍된 `https://ani.com/jwt_claims/is_admin`는 공개 클레임이다. 그 외에 등록된 클레임도, 공개 클레임도 아닌 `email`과 `hello`는 비공개 클레임이다.

### 서명

해당 토큰이 조작되었거나 변경되지 않았음을 확인하는 용도로 사용한다. 헤더의 인코딩 값과 내용의 인코딩 값을 합친 후에 주어진 비밀키를 사용해 해시값을 생성한다.